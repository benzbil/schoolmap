<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Map - Find Your Way Around!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header section with navigation -->
    <header>
        <h1>üè´ Welcome to Our School Map!</h1>
        <nav>
            <a href="index.html" class="nav-link active">Map</a>
            <a href="admin.html" class="nav-link">Admin</a>
            <a href="help.html" class="nav-link">Help</a>
        </nav>
    </header>

    <!-- Main content area -->
    <main>
        <!-- Search section -->
        <div class="search-container">
            <h2>üîç Find a Location</h2>
            <input type="text" id="searchInput" placeholder="Type classroom name or area (e.g., Library, Room 101)">
            <button onclick="searchLocation()">Search</button>
            <button onclick="clearSearch()">Clear</button>
        </div>

        <!-- Map display area -->
        <div class="map-container">
            <h2>üìç School Map</h2>
            
            <!-- Toggle between Google Maps and Custom Map -->
            <div class="map-toggle">
                <button onclick="showGoogleMaps()" id="googleBtn" class="active">Google Maps</button>
                <button onclick="showCustomMap()" id="customBtn">Custom Map</button>
            </div>

            <!-- Google Maps iframe (default view) -->
            <div id="googleMapContainer" class="map-view">
                <iframe id="googleMap" 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3048.4037580!2d-122.4194!3d37.7749!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzfCsDQ2JzI5LjYiTiAxMjLCsDI1JzA5LjgiVw!5e0!3m2!1sen!2sus!4v1234567890"
                        width="100%" 
                        height="400" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy">
                </iframe>
            </div>

            <!-- Custom school map with clickable areas -->
            <div id="customMapContainer" class="map-view" style="display: none;">
                <div class="custom-map">
                    <!-- This is where we'll place our custom school map -->
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8IS0tIFNjaG9vbCBCdWlsZGluZyBCYXNlIC0tPgogIDxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjcwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNmZmY4ZGMiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgCiAgPCEtLSBDbGFzc3Jvb21zIC0tPgogIDxyZWN0IHg9IjEwMCIgeT0iMTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjYmRlN2ZmIiBzdHJva2U9IiMzMzMzMzMiIGNsYXNzPSJjbGlja2FibGUiIGRhdGEtbmFtZT0iUm9vbSAxMDEiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjE0NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj5Sb29tIDEwMTwvdGV4dD4KICA8cmVjdCB4PSIyNTAiIHk9IjEwMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2JkZTdmZiIgc3Ryb2tlPSIjMzMzMzMzIiBjbGFzcz0iY2xpY2thYmxlIiBkYXRhLW5hbWU9IlJvb20gMTAyIi8+CiAgPHRleHQgeD0iMzAwIiB5PSIxNDUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiI+Um9vbSAxMDI8L3RleHQ+CiAgCiAgPCEtLSBMaWJyYXJ5IC0tPgogIDxyZWN0IHg9IjQwMCIgeT0iMTAwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjZmZjYmNiIiBzdHJva2U9IiMzMzMzMzMiIGNsYXNzPSJjbGlja2FibGUiIGRhdGEtbmFtZT0iTGlicmFyeSIvPgogIDx0ZXh0IHg9IjQ3NSIgeT0iMTQ1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPkxpYnJhcnk8L3RleHQ+CiAgCiAgPCEtLSBDYWZldGVyaWEgLS0+CiAgPHJlY3QgeD0iNjAwIiB5PSIxMDAiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiIGZpbGw9IiNjYmZmY2IiIHN0cm9rZT0iIzMzMzMzMyIgY2xhc3M9ImNsaWNrYWJsZSIgZGF0YS1uYW1lPSJDYWZldGVyaWEiLz4KICA8dGV4dCB4PSI2NTAiIHk9IjE0NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj5DYWZldGVyaWE8L3RleHQ+CiAgCiAgPCEtLSBHeW0gLS0+CiAgPHJlY3QgeD0iMTAwIiB5PSIyNTAiIHdpZHRoPSIyMDAiIGhlaWdodD0iODAiIGZpbGw9IiNmZmZmY2IiIHN0cm9rZT0iIzMzMzMzMyIgY2xhc3M9ImNsaWNrYWJsZSIgZGF0YS1uYW1lPSJHeW0iLz4KICA8dGV4dCB4PSIyMDAiIHk9IjI5NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj5HeW08L3RleHQ+CiAgCiAgPCEtLSBPZmZpY2UgLS0+CiAgPHJlY3QgeD0iNDAwIiB5PSIyNTAiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiIGZpbGw9IiNmZmNiZmYiIHN0cm9rZT0iIzMzMzMzMyIgY2xhc3M9ImNsaWNrYWJsZSIgZGF0YS1uYW1lPSJNYWluIE9mZmljZSIvPgogIDx0ZXh0IHg9IjQ1MCIgeT0iMjk1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPk1haW4gT2ZmaWNlPC90ZXh0PgogIAogIDwhLS0gUGxheWdyb3VuZCAtLT4KICA8Y2lyY2xlIGN4PSI2NTAiIGN5PSIyOTAiIHI9IjQwIiBmaWxsPSIjY2JmZmZmIiBzdHJva2U9IiMzMzMzMzMiIGNsYXNzPSJjbGlja2FibGUiIGRhdGEtbmFtZT0iUGxheWdyb3VuZCIvPgogIDx0ZXh0IHg9IjY1MCIgeT0iMjk1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiPlBsYXlncm91bmQ8L3RleHQ+Cjwvc3ZnPg==" 
                         alt="School Map" 
                         id="schoolMapImage">
                    
                    <!-- Clickable markers will be added here by JavaScript -->
                    <div id="mapMarkers"></div>
                </div>
            </div>
        </div>

        <!-- Location information display -->
        <div id="locationInfo" class="location-info" style="display: none;">
            <h3 id="locationName">Location Name</h3>
            <p id="locationDescription">Location description will appear here.</p>
            <button onclick="closeLocationInfo()">Close</button>
        </div>

        <!-- Loading message -->
        <div id="loadingMessage" class="loading">
            üì° Loading location data...
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>Made with ‚ù§Ô∏è by Grade 7 Students | <a href="help.html">Need Help?</a></p>
    </footer>

    <!-- Include our JavaScript file -->
    <script src="script.js"></script>
</body>
</html>

<!-- 
=====================================
ADMIN.HTML - Administration Page
=====================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - School Map</title>
    <style>
        /* Include all the same CSS as the main page */
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            margin: 0;
            font-size: 2.5em;
        }

        nav {
            margin-top: 15px;
        }

        .nav-link {
            display: inline-block;
            margin: 0 15px;
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .nav-link:hover {
            transform: scale(1.1);
            background: #45a049;
        }

        .nav-link.active {
            background: #ff6b6b;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .admin-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
        }

        input:focus, textarea:focus, select:focus {
            border-color: #4CAF50;
            outline: none;
        }

        button {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #45a049;
        }

        .delete-btn {
            background: #ff6b6b;
        }

        .delete-btn:hover {
            background: #ff5252;
        }

        .locations-list {
            margin-top: 30px;
        }

        .location-item {
            background: #f9f9f9;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin-top: 50px;
        }

        .error {
            color: #ff6b6b;
            font-weight: bold;
        }

        .success {
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>üîß Admin Panel</h1>
        <nav>
            <a href="index.html" class="nav-link">Map</a>
            <a href="admin.html" class="nav-link active">Admin</a>
            <a href="help.html" class="nav-link">Help</a>
        </nav>
    </header>

    <main>
        <div class="admin-container">
            <h2>üìù Add New Location</h2>
            <form id="locationForm">
                <div class="form-group">
                    <label for="locationName">Location Name:</label>
                    <input type="text" id="locationName" placeholder="e.g., Room 101, Library" required>
                </div>

                <div class="form-group">
                    <label for="locationDescription">Description:</label>
                    <textarea id="locationDescription" rows="3" placeholder="Brief description of this location"></textarea>
                </div>

                <div class="form-group">
                    <label for="locationType">Type:</label>
                    <select id="locationType">
                        <option value="classroom">Classroom</option>
                        <option value="office">Office</option>
                        <option value="facility">Facility</option>
                        <option value="outdoor">Outdoor Area</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="latitude">Latitude (for Google Maps):</label>
                    <input type="number" id="latitude" step="any" placeholder="e.g., 37.7749">
                </div>

                <div class="form-group">
                    <label for="longitude">Longitude (for Google Maps):</label>
                    <input type="number" id="longitude" step="any" placeholder="e.g., -122.4194">
                </div>

                <div class="form-group">
                    <label for="xCoord">X Coordinate (for Custom Map):</label>
                    <input type="number" id="xCoord" placeholder="e.g., 150">
                </div>

                <div class="form-group">
                    <label for="yCoord">Y Coordinate (for Custom Map):</label>
                    <input type="number" id="yCoord" placeholder="e.g., 145">
                </div>

                <button type="submit">Add Location</button>
                <button type="button" onclick="clearForm()">Clear Form</button>
            </form>

            <div id="message"></div>
        </div>

        <div class="admin-container">
            <h2>üìç Current Locations</h2>
            <button onclick="loadLocations()">Refresh List</button>
            <div id="locationsList" class="locations-list">
                <p>Click "Refresh List" to load current locations.</p>
            </div>
        </div>
    </main>

    <footer>
        <p>Admin Panel | <a href="help.html" style="color: white;">Setup Instructions</a></p>
    </footer>

    <script>
        // Admin page JavaScript
        let currentLocations = [];

        // Load locations from Google Sheets
        async function loadLocations() {
            try {
                const response = await fetch('YOUR_GOOGLE_APPS_SCRIPT_URL');
                const data = await response.json();
                currentLocations = data;
                displayLocations();
            } catch (error) {
                document.getElementById('locationsList').innerHTML = 
                    '<p class="error">Error loading locations. Make sure your Google Apps Script is set up correctly.</p>';
                console.error('Error:', error);
            }
        }

        // Display locations in the admin panel
        function displayLocations() {
            const container = document.getElementById('locationsList');
            if (currentLocations.length === 0) {
                container.innerHTML = '<p>No locations found. Add your first location above!</p>';
                return;
            }

            let html = '';
            currentLocations.forEach((location, index) => {
                html += `
                    <div class="location-item">
                        <h4>${location.name}</h4>
                        <p><strong>Description:</strong> ${location.description || 'No description'}</p>
                        <p><strong>Type:</strong> ${location.type}</p>
                        <p><strong>Coordinates:</strong> Lat: ${location.lat || 'N/A'}, Lng: ${location.lng || 'N/A'}, X: ${location.x || 'N/A'}, Y: ${location.y || 'N/A'}</p>
                        <button onclick="editLocation(${index})">Edit</button>
                        <button onclick="deleteLocation(${index})" class="delete-btn">Delete</button>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // Handle form submission
        document.getElementById('locationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const locationData = {
                name: document.getElementById('locationName').value,
                description: document.getElementById('locationDescription').value,
                type: document.getElementById('locationType').value,
                lat: document.getElementById('latitude').value || null,
                lng: document.getElementById('longitude').value || null,
                x: document.getElementById('xCoord').value || null,
                y: document.getElementById('yCoord').value || null
            };

            try {
                const response = await fetch('YOUR_GOOGLE_APPS_SCRIPT_URL', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(locationData)
                });

                if (response.ok) {
                    document.getElementById('message').innerHTML = 
                        '<p class="success">‚úÖ Location added successfully!</p>';
                    clearForm();
                    loadLocations(); // Refresh the list
                } else {
                    throw new Error('Failed to add location');
                }
            } catch (error) {
                document.getElementById('message').innerHTML = 
                    '<p class="error">‚ùå Error adding location. Check your Google Apps Script setup.</p>';
                console.error('Error:', error);
            }
        });

        // Clear the form
        function clearForm() {
            document.getElementById('locationForm').reset();
            document.getElementById('message').innerHTML = '';
        }

        // Edit location (simplified for this example)
        function editLocation(index) {
            const location = currentLocations[index];
            document.getElementById('locationName').value = location.name;
            document.getElementById('locationDescription').value = location.description || '';
            document.getElementById('locationType').value = location.type;
            document.getElementById('latitude').value = location.lat || '';
            document.getElementById('longitude').value = location.lng || '';
            document.getElementById('xCoord').value = location.x || '';
            document.getElementById('yCoord').value = location.y || '';
        }

        // Delete location (simplified for this example)
        function deleteLocation(index) {
            if (confirm('Are you sure you want to delete this location?')) {
                // In a real implementation, you would call your Google Apps Script to delete
                alert('Delete functionality needs to be implemented in your Google Apps Script!');
            }
        }

        // Load locations when page loads
        window.addEventListener('load', loadLocations);
    </script>
</body>
</html>